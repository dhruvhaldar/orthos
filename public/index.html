<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthos - Composite Mechanics Engine</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Orthos Analysis Engine</h1>
        <p>SD2413 Composite Mechanics & Plate Analysis</p>

        <div class="section">
            <h2>Micromechanics</h2>
            <p>Calculate E1 and E2 based on Fiber Volume Fraction.</p>
            <div class="controls">
                <button onclick="runMicromechanics()">Calculate Properties</button>
            </div>
            <div id="micromech-plot"></div>
        </div>

        <div class="section">
            <h2>Plate Bending (Navier)</h2>
            <p>Solve for deflection of a Simply Supported [0/90]s Plate.</p>
            <div class="controls">
                <label>Load (Pa): <input type="number" id="plate-load" value="1000"></label>
                <button onclick="solvePlate()">Solve Plate</button>
            </div>
            <div id="plate-plot" style="width:100%;height:500px;"></div>
        </div>

        <div class="section">
            <h2>Hole Stress Concentration</h2>
            <p>Visualize tangential stress around a hole.</p>
            <div class="controls">
                <button onclick="visualizeHoleStress()">Visualize Stress</button>
            </div>
            <div id="hole-plot" style="width:100%;height:500px;"></div>
        </div>
    </div>

    <script src="plate_viewer.js"></script>
    <script src="stress_map.js"></script>
    <script>
        // Inline simple logic for buttons, complex viz logic in separate files
        async function runMicromechanics() {
            // Simplified demo: Just plot generic curves using Plotly directly for now
            // or call the backend. For this artifact, we'll simulate the "Artifact Output"

            const vf = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7];
            const E1 = vf.map(v => 230e9 * v + 3e9 * (1-v));
            const E2 = vf.map(v => {
                const xi = 2;
                const Ef = 230e9, Em = 3e9;
                const eta = (Ef/Em - 1)/(Ef/Em + xi);
                return Em * (1 + xi*eta*v)/(1 - eta*v);
            });

            const trace1 = {
                x: vf,
                y: E1.map(e => e/1e9),
                type: 'scatter',
                mode: 'lines',
                name: 'E1 (RoM)'
            };

            const trace2 = {
                x: vf,
                y: E2.map(e => e/1e9),
                type: 'scatter',
                mode: 'lines',
                name: 'E2 (Halpin-Tsai)'
            };

            const layout = {
                title: 'Micromechanics: Stiffness Prediction',
                xaxis: {title: 'Fiber Volume Fraction'},
                yaxis: {title: 'Modulus (GPa)'}
            };

            Plotly.newPlot('micromech-plot', [trace1, trace2], layout);
        }
    </script>
</body>
</html>
